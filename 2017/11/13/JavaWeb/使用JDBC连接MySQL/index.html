<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mute">
  <!-- Open Graph Data -->
  <meta property="og:title" content="使用JDBC连接MySQL">
  <meta property="og:description" content="杨柳潇个人主页">
  <meta property="og:site_name" content="杨柳潇的博客">
  <meta property="og:type" content="article">
  <meta property="og:image" content="http://yangliuxiao.top">
  
    <link rel="alternate" href="/atom.xml" title="杨柳潇的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  

  <!-- Site Title -->
  <title>杨柳潇的博客</title>
  
  <!-- 为了增加TOP按钮，新增的CSS文件 -->
  <link rel="stylesheet" href="/css/TOPButtonStyle.css">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/background.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">使用JDBC连接MySQL</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/kevinyang0304">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="/About/index.html">
                  
                  About
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Mute</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-11-13</span>
           <!-- <span class="time">21:49:47</span> -->
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/JavaWeb开发/">JavaWeb开发</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/代码/">#代码</a> <a class="tag" href="/tags/Java/">#Java</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h3 id="JDBC简述"><a href="#JDBC简述" class="headerlink" title="JDBC简述"></a>JDBC简述</h3><hr>
<ul>
<li><p><strong>Java数据库连接（Java Database connectivity）</strong>简称为JDBC，是Java程序与数据库系统通信的标准API，它包含一组用Java语言编写的类和接口。</p>
</li>
<li><p>通过JDBC可以方便的向各种关系数据库发送SQL语句。也就是说，开发人员不需要为访问不同的数据库而编写不同的应用程序，而只需使用JDBC编写一个<strong>通用程序</strong>就可以向不同的数据库发送SQL调用。</p>
</li>
<li><p>由于Java的平台无关性，使用Java编写的应用程序可以运行在任何支持Java语言的平台上，而无须针对不同平台编写不同的应用程序。将Java和JDBC结合起来操作数据库可以真正实现“一次编写，处处运行”。</p>
</li>
</ul>
<h3 id="使用JDBC连接MySQL数据库步骤"><a href="#使用JDBC连接MySQL数据库步骤" class="headerlink" title="使用JDBC连接MySQL数据库步骤"></a>使用JDBC连接MySQL数据库步骤</h3><hr>
<p>假设MySQL中有book表，有bookid和name两个属性，类型都为String。</p>
<p> <strong>① 调用Class.forName()方法加载相应的数据库驱动程序</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure>
<p> <strong>② 定义要连接数据库的地址URL</strong>，<strong>格式为：jdbc：&lt;子协议&gt;：&lt;子名称&gt;</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String mysqlURL = <span class="string">"jdbc:mysql://host:port/dbname"</span>;  <span class="comment">/*dbName是数据库名*/</span></span><br></pre></td></tr></table></figure>
<p> <strong>③ 使用驱动程序类建立与数据库的连接</strong>。调用DriverManager对象的getConnection()方法，获得一个Connection对象，它表示一个打开的连接。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(URL,<span class="string">"数据库用户名"</span>,<span class="string">"密码"</span>);</span><br></pre></td></tr></table></figure>
<p> <strong>④ 创建语句对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Statement用于传递简单的不带参数的SQL语句给数据库管理系统执行 */</span></span><br><span class="line">Statement stmt = conn.createStatement();</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* PreparedStatement用于传送带有一个或多个参数的SQL语句 */</span></span><br><span class="line">PreparedStatement psm = conn.prepareStatement(<span class="string">"INSERT INTO book(bookid, name)VALUES(?,?)"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* CallableStatement对象用于调用存储过程  validate是存储过程名*/</span></span><br><span class="line">CallableStatement csm = conn.prepareCall(<span class="string">"&#123;call validate(?,?)&#125;"</span>);</span><br></pre></td></tr></table></figure>
<p> <strong>⑤ 执行语句</strong></p>
<p>Statement接口提供了3个方法执行SQL语句，分别是executeQuery、executeUpdate和execute。</p>
<ul>
<li><strong>executeQuery</strong>：用于执行SQL查询语句，并返回单个结果集，保存在ResultSet对象中。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"SELECT * FROM book"</span>;</span><br><span class="line">ResultSel rs = stmt.executeQuery(sql);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>executeUpdate</strong>：可用于执行SQL <strong>DML（数据库操纵语句）</strong>语句，即INSERT、UPDATE和DELETE语句。此时返回受影响的行数，返回值为一个整数。 也可用于执行SQL <strong>DDL（数据库定义语句）</strong>语句，如CREATE TABLE、DROP TABLE等，此时返回值为0.</p>
</li>
<li><p><strong>execute</strong>：既可以执行查询语句，也可以执行更新语句，<strong>常用于动态处理类型未知的SQL语句</strong>。</p>
<p><strong>⑥ 对返回的结果集ResultSet对象进行处理</strong></p>
</li>
</ul>
<p>ResultSet对象包含了SQL语句的执行结果，它使用一组get方法实现对结果行中每列数据的访问。使用next方法移动到下一行，使其成为当前行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"SELECT * FROM book"</span>;</span><br><span class="line">ResultSel rs = stmt.executeQuery(sql);</span><br><span class="line"><span class="comment">/* 对结果集进行迭代 显示所有记录的前两列 */</span></span><br><span class="line"><span class="keyword">while</span>(re.next())&#123;</span><br><span class="line">    bookid = rs.getString(<span class="number">1</span>);</span><br><span class="line">    name = rs.getString(<span class="number">2</span>);</span><br><span class="line">    System.out.println(bookid + <span class="string">","</span> + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <strong>⑦ 关闭连接</strong>。 操作完成后要关闭所有JDBC对象，以释放资源。包括：关闭结果集、关闭语句对象和连接对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure>

        </div>
      </div>
    </div>
	
	  <span id="back-to-top">
	  <a href="#top"><img src="/img/top3.png"></a>
	</span>
	
  </div>

</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <!-- 
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
		-->
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

